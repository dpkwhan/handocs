{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Docs \u00b6 This is a static documentation site. Github Pages","title":"Home"},{"location":"#docs","text":"This is a static documentation site. Github Pages","title":"Docs"},{"location":"aboutme/","text":"About me \u00b6 I am passionate about every aspects of electronic trading, including trading, market microstructure, regulartions, mathematics and statistics, programming, etc.","title":"About me"},{"location":"aboutme/#about-me","text":"I am passionate about every aspects of electronic trading, including trading, market microstructure, regulartions, mathematics and statistics, programming, etc.","title":"About me"},{"location":"getting-started/","text":"Getting started \u00b6 Live Preview \u00b6 MkDocs includes a development server, so you can review your changes as you go. The development server can be started with the following command: 1 mkdocs serve Now you can point your browser to http://localhost:8000 and the Material theme should be visible. From here on, you can start writing your documentation, or read on and customize the theme.","title":"Getting started"},{"location":"getting-started/#getting-started","text":"","title":"Getting started"},{"location":"getting-started/#live-preview","text":"MkDocs includes a development server, so you can review your changes as you go. The development server can be started with the following command: 1 mkdocs serve Now you can point your browser to http://localhost:8000 and the Material theme should be visible. From here on, you can start writing your documentation, or read on and customize the theme.","title":"Live Preview"},{"location":"javascript/about/","text":"","title":"About"},{"location":"kdb/dictionary/add-a-new-key-to-dictionary/","text":"Add a new key to dictionary \u00b6 May 13, 2019 Introduction \u00b6 Suppose you have an existing dictionary d as follows: 1 2 3 4 q)d:`firstName`lastName!`David`Han q)d firstName| David lastName | Han Now I want to add another key to this dictionary to indicate my age, say, d[`age]:30 . Unfortunately, you will see this: 1 2 3 4 q)d[`age]:30 'type [0] d[`age]:30 ^ The type error occurs because: The existing dictionary is uniform, and The value type of new item is different from the value type of the existing dictionary Mixed Value Types \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 q)d2:`firstName`lastName`zip!(`David;`Han;10583) q)d2 firstName| `David lastName | `Han zip | 10583 q)d2[`age]:30 /add a new item q)d2 firstName| `David lastName | `Han zip | 10583 age | 30 Uniform Value Type \u00b6 When the value type of the new item is different from the value type of the existing dictionary, we can create a second dictonary with the new key and then merge this dictionary with the existing dictionary. For example 1 2 3 4 5 6 7 8 9 q)d:`firstName`lastName!`David`Han q)d firstName| David lastName | Han q)d,(enlist `age)!(enlist 30) firstName| `David lastName | `Han age | 30 Remarks \u00b6 When the value type of a dictionary is not known in advance, the second approach provides a more robust way to insert a new entry to an existing dictionary.","title":"Add a new key to dictionary"},{"location":"kdb/dictionary/add-a-new-key-to-dictionary/#add-a-new-key-to-dictionary","text":"May 13, 2019","title":"Add a new key to dictionary"},{"location":"kdb/dictionary/add-a-new-key-to-dictionary/#introduction","text":"Suppose you have an existing dictionary d as follows: 1 2 3 4 q)d:`firstName`lastName!`David`Han q)d firstName| David lastName | Han Now I want to add another key to this dictionary to indicate my age, say, d[`age]:30 . Unfortunately, you will see this: 1 2 3 4 q)d[`age]:30 'type [0] d[`age]:30 ^ The type error occurs because: The existing dictionary is uniform, and The value type of new item is different from the value type of the existing dictionary","title":"Introduction"},{"location":"kdb/dictionary/add-a-new-key-to-dictionary/#mixed-value-types","text":"1 2 3 4 5 6 7 8 9 10 11 12 q)d2:`firstName`lastName`zip!(`David;`Han;10583) q)d2 firstName| `David lastName | `Han zip | 10583 q)d2[`age]:30 /add a new item q)d2 firstName| `David lastName | `Han zip | 10583 age | 30","title":"Mixed Value Types"},{"location":"kdb/dictionary/add-a-new-key-to-dictionary/#uniform-value-type","text":"When the value type of the new item is different from the value type of the existing dictionary, we can create a second dictonary with the new key and then merge this dictionary with the existing dictionary. For example 1 2 3 4 5 6 7 8 9 q)d:`firstName`lastName!`David`Han q)d firstName| David lastName | Han q)d,(enlist `age)!(enlist 30) firstName| `David lastName | `Han age | 30","title":"Uniform Value Type"},{"location":"kdb/dictionary/add-a-new-key-to-dictionary/#remarks","text":"When the value type of a dictionary is not known in advance, the second approach provides a more robust way to insert a new entry to an existing dictionary.","title":"Remarks"},{"location":"kdb/function/function-argument/","text":"Function Argument \u00b6","title":"Function Argument"},{"location":"kdb/function/function-argument/#function-argument","text":"","title":"Function Argument"},{"location":"markets/data/finra-ats/","text":"FINRA ATS \u00b6 May 15, 2019 Coming soon!","title":"FINRA ATS"},{"location":"markets/data/finra-ats/#finra-ats","text":"May 15, 2019 Coming soon!","title":"FINRA ATS"},{"location":"markets/rar/ssr/","text":"Short Sell Restriction \u00b6 May 10, 2019 I had a VWAP long sell order on LMNX.OQ unfinished on May 8, 2019. One basic requirement of a VWAP strategy is to guarantee the order completion at client specified end time or market close if an end time is not provided for the client order if no volume limit or price limit. This made me a little bit confused \ud83d\ude1f. A quick digging shows this stock was trading under short sell restriction. Due to this restriction, the VWAP algorithm cannot cross the spread to finish the residual shares. My immediate question is why this long sell order is short sell restricted. Some research leads me to the NYSE TAQ Specifications . On page 24, it says A Short Sale Restriction is to be in effect if a security\u2019s price decreases by 10% or more from the previous day\u2019s closing price. Once activated, the Short Sale Restriction will remain in effect for the remainder of the day as well as the following day, unless deactivated. Next I went to Yahoo Finance to check the OHLC prices for the days before May 8, 2019 as shown below: Clearly the intraday price dropped more than 10% from its previous close on May 7, 2019, which activated the short sell restriction. So the trading on May 8 is also under SSR. Why did the price drop so much on May 7, 2019? A little further digging shows this is due to the much worse earnings than the average expectation repored after market close on May 6, 2019. The earnings surprise is -200%.","title":"Short Sell Restriction"},{"location":"markets/rar/ssr/#short-sell-restriction","text":"May 10, 2019 I had a VWAP long sell order on LMNX.OQ unfinished on May 8, 2019. One basic requirement of a VWAP strategy is to guarantee the order completion at client specified end time or market close if an end time is not provided for the client order if no volume limit or price limit. This made me a little bit confused \ud83d\ude1f. A quick digging shows this stock was trading under short sell restriction. Due to this restriction, the VWAP algorithm cannot cross the spread to finish the residual shares. My immediate question is why this long sell order is short sell restricted. Some research leads me to the NYSE TAQ Specifications . On page 24, it says A Short Sale Restriction is to be in effect if a security\u2019s price decreases by 10% or more from the previous day\u2019s closing price. Once activated, the Short Sale Restriction will remain in effect for the remainder of the day as well as the following day, unless deactivated. Next I went to Yahoo Finance to check the OHLC prices for the days before May 8, 2019 as shown below: Clearly the intraday price dropped more than 10% from its previous close on May 7, 2019, which activated the short sell restriction. So the trading on May 8 is also under SSR. Why did the price drop so much on May 7, 2019? A little further digging shows this is due to the much worse earnings than the average expectation repored after market close on May 6, 2019. The earnings surprise is -200%.","title":"Short Sell Restriction"},{"location":"python/a-first-taste-of-pathlib/","text":"A First Taste of pathlib \u00b6 May 21, 2019 Introduction \u00b6 The library pathlib is introduced in Python 3.4 and it brings us a spate of convenient features. I try using this library instead of the traditional functions provided in modules os and os.path in one of my projects and demonstrate why it is better than the traditional functions. The task here is to write a function to download the daily volume file from this page for a given year. Traditional Python Code \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import requests import os def download_file_1 ( year ): site_url = 'http://markets.cboe.com/us/equities' base_url = f '{site_url}/market_statistics/historical_market_volume' url = f '{base_url}/market_history_{year}.csv-dl' fpath = os . path . join ( os . path . expanduser ( \"~\" ), 'data' , 'daily_volume' ) if not os . path . exists ( fpath ): os . makedirs ( fpath ) fname = os . path . join ( fpath , f 'daily_volume_{year}.csv' ) res = requests . get ( url ) with open ( fname , 'w' ) as f : f . write ( res . text ) if __name__ == \"__main__\" : download_file_1 ( 2019 ) Using pathlib \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import requests from pathlib import Path def download_file_2 ( year ): site_url = 'http://markets.cboe.com/us/equities' base_url = f '{site_url}/market_statistics/historical_market_volume' url = f '{base_url}/market_history_{year}.csv-dl' fpath = Path . home () . joinpath ( 'data' , 'daily_volume' ) fpath . mkdir ( parents = True , exist_ok = True ) fname = fpath / f 'daily_volume_{year}.csv' res = requests . get ( url ) with fname . open ( 'w' ) as f : f . write ( res . text ) if __name__ == \"__main__\" : download_file_2 ( 2019 ) Main Differences \u00b6 The main differences are highlighted at lines 9, 10, 11 and 14. Get home directory os.path.expanduser(\"~\") Path.home() Join path os.path.join('dir', 'subdir') Path.joinpath('dir', 'subdir') Create path if not os.path.exists(fpath): os.makedirs(fpath) fpath.mkdir(parents=True, exist_ok=True) Open file with open(fname, 'w') as f with fname.open('w') as f Summary \u00b6 pathlib library puts these methods that used to be in os and os.path into a single library and makes it easier to use. For additional features provided by this library, see pathlib .","title":"A First Taste of pathlib"},{"location":"python/a-first-taste-of-pathlib/#a-first-taste-of-pathlib","text":"May 21, 2019","title":"A First Taste of pathlib"},{"location":"python/a-first-taste-of-pathlib/#introduction","text":"The library pathlib is introduced in Python 3.4 and it brings us a spate of convenient features. I try using this library instead of the traditional functions provided in modules os and os.path in one of my projects and demonstrate why it is better than the traditional functions. The task here is to write a function to download the daily volume file from this page for a given year.","title":"Introduction"},{"location":"python/a-first-taste-of-pathlib/#traditional-python-code","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import requests import os def download_file_1 ( year ): site_url = 'http://markets.cboe.com/us/equities' base_url = f '{site_url}/market_statistics/historical_market_volume' url = f '{base_url}/market_history_{year}.csv-dl' fpath = os . path . join ( os . path . expanduser ( \"~\" ), 'data' , 'daily_volume' ) if not os . path . exists ( fpath ): os . makedirs ( fpath ) fname = os . path . join ( fpath , f 'daily_volume_{year}.csv' ) res = requests . get ( url ) with open ( fname , 'w' ) as f : f . write ( res . text ) if __name__ == \"__main__\" : download_file_1 ( 2019 )","title":"Traditional Python Code"},{"location":"python/a-first-taste-of-pathlib/#using-pathlib","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import requests from pathlib import Path def download_file_2 ( year ): site_url = 'http://markets.cboe.com/us/equities' base_url = f '{site_url}/market_statistics/historical_market_volume' url = f '{base_url}/market_history_{year}.csv-dl' fpath = Path . home () . joinpath ( 'data' , 'daily_volume' ) fpath . mkdir ( parents = True , exist_ok = True ) fname = fpath / f 'daily_volume_{year}.csv' res = requests . get ( url ) with fname . open ( 'w' ) as f : f . write ( res . text ) if __name__ == \"__main__\" : download_file_2 ( 2019 )","title":"Using pathlib"},{"location":"python/a-first-taste-of-pathlib/#main-differences","text":"The main differences are highlighted at lines 9, 10, 11 and 14. Get home directory os.path.expanduser(\"~\") Path.home() Join path os.path.join('dir', 'subdir') Path.joinpath('dir', 'subdir') Create path if not os.path.exists(fpath): os.makedirs(fpath) fpath.mkdir(parents=True, exist_ok=True) Open file with open(fname, 'w') as f with fname.open('w') as f","title":"Main Differences"},{"location":"python/a-first-taste-of-pathlib/#summary","text":"pathlib library puts these methods that used to be in os and os.path into a single library and makes it easier to use. For additional features provided by this library, see pathlib .","title":"Summary"},{"location":"python/evolution-of-string-formatting/","text":"Evolation of String Formatting \u00b6 TODO","title":"Evolation of String Formatting"},{"location":"python/evolution-of-string-formatting/#evolation-of-string-formatting","text":"TODO","title":"Evolation of String Formatting"},{"location":"tutorials/javascript/","text":"JavaScript Snippets \u00b6 Arrays \u00b6 Get unique values of an array \u00b6 Getting an array of unique values is probably easier than you think: 1 2 const uniqueArray = [... new Set ([ 2 , 1 , 2 , 1 , 3 , 3 , 4 , 4 ])]; console . log ( uniqueArray ); // [2, 1, 3, 4] Array and Boolean \u00b6 Ever need to filter falsy values (0, undefined, null, false, etc.) out of an array? You may not have known this trick: 1 2 3 4 5 6 const arrayValues = [ \"\" , \"David\" , \"Han\" ]; const nonFalsyValues = arrayValues . map ( item => { return item . length ; }) . filter ( Boolean ); // Get rid of bad values Just pass Boolean and all those falsy value go away Objects \u00b6 Create an empty object \u00b6 Sure you can create an object that seems empty with {}, but that object still has a proto and the usual hasOwnProperty and other object methods. There is a way, however, to create a pure \"dictionary\" object: 1 2 3 4 let dict = Object . create ( null ); // dict.__proto__ === \"undefined\" // No object properties exist until you add them There are absolutely no keys or methods on that object that you don't put there! Merge objects \u00b6 The need to merge multiple objects in JavaScript has been around forever, especially as we started creating classes and widgets with options: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 const person = { name : 'David Walsh' , gender : 'Male' }; const tools = { computer : 'Mac' , editor : 'Atom' }; const attributes = { handsomeness : 'Extreme' , hair : 'Brown' , eyes : 'Blue' }; const summary = {... person , ... tools , ... attributes }; /* Object { \"computer\": \"Mac\", \"editor\": \"Atom\", \"eyes\": \"Blue\", \"gender\": \"Male\", \"hair\": \"Brown\", \"handsomeness\": \"Extreme\", \"name\": \"David Walsh\", } */ Reference \u00b6 https://davidwalsh.name/javascript-tricks","title":"JavaScript Snippets"},{"location":"tutorials/javascript/#javascript-snippets","text":"","title":"JavaScript Snippets"},{"location":"tutorials/javascript/#arrays","text":"","title":"Arrays"},{"location":"tutorials/javascript/#get-unique-values-of-an-array","text":"Getting an array of unique values is probably easier than you think: 1 2 const uniqueArray = [... new Set ([ 2 , 1 , 2 , 1 , 3 , 3 , 4 , 4 ])]; console . log ( uniqueArray ); // [2, 1, 3, 4]","title":"Get unique values of an array"},{"location":"tutorials/javascript/#array-and-boolean","text":"Ever need to filter falsy values (0, undefined, null, false, etc.) out of an array? You may not have known this trick: 1 2 3 4 5 6 const arrayValues = [ \"\" , \"David\" , \"Han\" ]; const nonFalsyValues = arrayValues . map ( item => { return item . length ; }) . filter ( Boolean ); // Get rid of bad values Just pass Boolean and all those falsy value go away","title":"Array and Boolean"},{"location":"tutorials/javascript/#objects","text":"","title":"Objects"},{"location":"tutorials/javascript/#create-an-empty-object","text":"Sure you can create an object that seems empty with {}, but that object still has a proto and the usual hasOwnProperty and other object methods. There is a way, however, to create a pure \"dictionary\" object: 1 2 3 4 let dict = Object . create ( null ); // dict.__proto__ === \"undefined\" // No object properties exist until you add them There are absolutely no keys or methods on that object that you don't put there!","title":"Create an empty object"},{"location":"tutorials/javascript/#merge-objects","text":"The need to merge multiple objects in JavaScript has been around forever, especially as we started creating classes and widgets with options: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 const person = { name : 'David Walsh' , gender : 'Male' }; const tools = { computer : 'Mac' , editor : 'Atom' }; const attributes = { handsomeness : 'Extreme' , hair : 'Brown' , eyes : 'Blue' }; const summary = {... person , ... tools , ... attributes }; /* Object { \"computer\": \"Mac\", \"editor\": \"Atom\", \"eyes\": \"Blue\", \"gender\": \"Male\", \"hair\": \"Brown\", \"handsomeness\": \"Extreme\", \"name\": \"David Walsh\", } */","title":"Merge objects"},{"location":"tutorials/javascript/#reference","text":"https://davidwalsh.name/javascript-tricks","title":"Reference"},{"location":"tutorials/javascript/arrays/","text":"Arrays \u00b6 Get unique values of an array \u00b6 Getting an array of unique values is probably easier than you think: 1 2 const uniqueArray = [... new Set ([ 2 , 1 , 2 , 1 , 3 , 3 , 4 , 4 ])]; console . log ( uniqueArray ); // [2, 1, 3, 4] Array and Boolean \u00b6 Ever need to filter falsy values (0, undefined, null, false, etc.) out of an array? You may not have known this trick: 1 2 3 4 5 6 const arrayValues = [ \"\" , \"David\" , \"Han\" ]; const nonFalsyValues = arrayValues . map ( item => { return item . length ; }) . filter ( Boolean ); // Get rid of bad values Just pass Boolean and all those falsy value go away!","title":"Arrays"},{"location":"tutorials/javascript/arrays/#arrays","text":"","title":"Arrays"},{"location":"tutorials/javascript/arrays/#get-unique-values-of-an-array","text":"Getting an array of unique values is probably easier than you think: 1 2 const uniqueArray = [... new Set ([ 2 , 1 , 2 , 1 , 3 , 3 , 4 , 4 ])]; console . log ( uniqueArray ); // [2, 1, 3, 4]","title":"Get unique values of an array"},{"location":"tutorials/javascript/arrays/#array-and-boolean","text":"Ever need to filter falsy values (0, undefined, null, false, etc.) out of an array? You may not have known this trick: 1 2 3 4 5 6 const arrayValues = [ \"\" , \"David\" , \"Han\" ]; const nonFalsyValues = arrayValues . map ( item => { return item . length ; }) . filter ( Boolean ); // Get rid of bad values Just pass Boolean and all those falsy value go away!","title":"Array and Boolean"},{"location":"tutorials/javascript/destructuring/","text":"Desctructuring \u00b6 Destructuring aliases \u00b6 Destructuring is a very welcomed addition to JavaScript but sometimes we'd prefer to refer to those properties by another name, so we can take advantage of aliases: 1 2 3 4 5 6 7 const obj = { x : 1 }; // Grabs obj.x as { x } const { x } = obj ; // Grabs obj.x as { otherName } const { x : otherName } = obj ; Useful for avoiding naming conflicts with existing variables!","title":"Destructuring"},{"location":"tutorials/javascript/destructuring/#desctructuring","text":"","title":"Desctructuring"},{"location":"tutorials/javascript/destructuring/#destructuring-aliases","text":"Destructuring is a very welcomed addition to JavaScript but sometimes we'd prefer to refer to those properties by another name, so we can take advantage of aliases: 1 2 3 4 5 6 7 const obj = { x : 1 }; // Grabs obj.x as { x } const { x } = obj ; // Grabs obj.x as { otherName } const { x : otherName } = obj ; Useful for avoiding naming conflicts with existing variables!","title":"Destructuring aliases"},{"location":"tutorials/javascript/objects/","text":"Objects \u00b6 Create an empty object \u00b6 Sure you can create an object that seems empty with {}, but that object still has a proto and the usual hasOwnProperty and other object methods. There is a way, however, to create a pure \"dictionary\" object: 1 2 3 4 let dict = Object . create ( null ); // dict.__proto__ === \"undefined\" // No object properties exist until you add them There are absolutely no keys or methods on that object that you don't put there! Merge objects \u00b6 The need to merge multiple objects in JavaScript has been around forever, especially as we started creating classes and widgets with options: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 const person = { name : 'David Walsh' , gender : 'Male' }; const tools = { computer : 'Mac' , editor : 'Atom' }; const attributes = { handsomeness : 'Extreme' , hair : 'Brown' , eyes : 'Blue' }; const summary = {... person , ... tools , ... attributes }; /* Object { \"computer\": \"Mac\", \"editor\": \"Atom\", \"eyes\": \"Blue\", \"gender\": \"Male\", \"hair\": \"Brown\", \"handsomeness\": \"Extreme\", \"name\": \"David Walsh\", } */","title":"Objects"},{"location":"tutorials/javascript/objects/#objects","text":"","title":"Objects"},{"location":"tutorials/javascript/objects/#create-an-empty-object","text":"Sure you can create an object that seems empty with {}, but that object still has a proto and the usual hasOwnProperty and other object methods. There is a way, however, to create a pure \"dictionary\" object: 1 2 3 4 let dict = Object . create ( null ); // dict.__proto__ === \"undefined\" // No object properties exist until you add them There are absolutely no keys or methods on that object that you don't put there!","title":"Create an empty object"},{"location":"tutorials/javascript/objects/#merge-objects","text":"The need to merge multiple objects in JavaScript has been around forever, especially as we started creating classes and widgets with options: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 const person = { name : 'David Walsh' , gender : 'Male' }; const tools = { computer : 'Mac' , editor : 'Atom' }; const attributes = { handsomeness : 'Extreme' , hair : 'Brown' , eyes : 'Blue' }; const summary = {... person , ... tools , ... attributes }; /* Object { \"computer\": \"Mac\", \"editor\": \"Atom\", \"eyes\": \"Blue\", \"gender\": \"Male\", \"hair\": \"Brown\", \"handsomeness\": \"Extreme\", \"name\": \"David Walsh\", } */","title":"Merge objects"},{"location":"vscode/about/","text":"","title":"About"},{"location":"vscode/common/common/","text":"VS Code Tips \u00b6","title":"Common"},{"location":"vscode/common/common/#vs-code-tips","text":"","title":"VS Code Tips"},{"location":"vscode/javascript/javascript/","text":"VS Code Tips For JavaScript \u00b6","title":"JavaScript"},{"location":"vscode/javascript/javascript/#vs-code-tips-for-javascript","text":"","title":"VS Code Tips For JavaScript"},{"location":"vscode/python/python/","text":"VS Code Tips for Python \u00b6 Plugins \u00b6 Python Trailing Spaces Code Runner Prettier - Code formatter Todo Tree autoDocstring Python-autopep8 Tips and Tricks \u00b6","title":"Python"},{"location":"vscode/python/python/#vs-code-tips-for-python","text":"","title":"VS Code Tips for Python"},{"location":"vscode/python/python/#plugins","text":"Python Trailing Spaces Code Runner Prettier - Code formatter Todo Tree autoDocstring Python-autopep8","title":"Plugins"},{"location":"vscode/python/python/#tips-and-tricks","text":"","title":"Tips and Tricks"}]}