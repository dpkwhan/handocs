



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Learning is a lifelong journey">
      
      
      
        <meta name="author" content="David Han">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/profile-pic.jpg">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.2">
    
    
      
        <title>My Journey to Web Scraping - David Han</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.3020aac5.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-140259656-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#my-journey-to-web-scraping" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="David Han" class="md-header-nav__button md-logo">
          
            <img src="../../assets/images/profile-pic.jpg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              David Han
            </span>
            <span class="md-header-nav__topic">
              My Journey to Web Scraping
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../kdb/add-a-new-key-to-dictionary/" title="Kdb/q" class="md-tabs__link">
          Kdb/q
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../python/a-first-taste-of-pathlib/" title="Python" class="md-tabs__link">
          Python
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../array-concatenation/" title="JavaScript" class="md-tabs__link md-tabs__link--active">
          JavaScript
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../vscode/common/common/" title="VS Code" class="md-tabs__link">
          VS Code
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../markets/short-sell-restriction/" title="Markets" class="md-tabs__link">
          Markets
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="David Han" class="md-nav__button md-logo">
      
        <img src="../../assets/images/profile-pic.jpg" width="48" height="48">
      
    </a>
    David Han
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../aboutme/" title="About me" class="md-nav__link">
      About me
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Kdb/q
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Kdb/q
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../kdb/add-a-new-key-to-dictionary/" title="Add a New Key to a Dictionary" class="md-nav__link">
      Add a New Key to a Dictionary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../kdb/try-catch/" title="Try and Catch in q" class="md-nav__link">
      Try and Catch in q
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../kdb/function-argument/" title="Function Argument" class="md-nav__link">
      Function Argument
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../kdb/write-function-for-rdb-and-hdb/" title="Write Function for RDB and HDB" class="md-nav__link">
      Write Function for RDB and HDB
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../python/a-first-taste-of-pathlib/" title="A First Taste of pathlib" class="md-nav__link">
      A First Taste of pathlib
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../python/evolution-of-string-formatting/" title="Evolution of String Formatting" class="md-nav__link">
      Evolution of String Formatting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      JavaScript
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        JavaScript
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../array-concatenation/" title="Array Concatenation" class="md-nav__link">
      Array Concatenation
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        My Journey to Web Scraping
      </label>
    
    <a href="./" title="My Journey to Web Scraping" class="md-nav__link md-nav__link--active">
      My Journey to Web Scraping
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phantomjs" title="PhantomJS" class="md-nav__link">
    PhantomJS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selenium-with-python" title="Selenium with Python" class="md-nav__link">
    Selenium with Python
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requests-in-python" title="Requests in Python" class="md-nav__link">
    Requests in Python
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scrapy" title="Scrapy" class="md-nav__link">
    Scrapy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#puppeteer" title="Puppeteer" class="md-nav__link">
    Puppeteer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#curl" title="Curl" class="md-nav__link">
    Curl
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      VS Code
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        VS Code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../vscode/common/common/" title="Common" class="md-nav__link">
      Common
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../vscode/python/python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../vscode/javascript/javascript/" title="JavaScript" class="md-nav__link">
      JavaScript
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Markets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Markets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../markets/short-sell-restriction/" title="Short Sell Restriction" class="md-nav__link">
      Short Sell Restriction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../markets/finra-ats/" title="FINRA ATS Data" class="md-nav__link">
      FINRA ATS Data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phantomjs" title="PhantomJS" class="md-nav__link">
    PhantomJS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selenium-with-python" title="Selenium with Python" class="md-nav__link">
    Selenium with Python
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requests-in-python" title="Requests in Python" class="md-nav__link">
    Requests in Python
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scrapy" title="Scrapy" class="md-nav__link">
    Scrapy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#puppeteer" title="Puppeteer" class="md-nav__link">
    Puppeteer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#curl" title="Curl" class="md-nav__link">
    Curl
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="my-journey-to-web-scraping">My Journey to Web Scraping<a class="headerlink" href="#my-journey-to-web-scraping" title="Permanent link">&para;</a></h1>
<p><span style="display:block;text-align:right">May 27, 2019</span></p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>I started to learn web scraping techniques over the long weekend of Memorial Day in 2015. The main reason for me to learn this is that one of my colleagues manually downloaded the FINRA ATS data every week from its website. The steps she followed are like this:</p>
<ul>
<li>Go to <a href="https://otctransparency.finra.org">https://otctransparency.finra.org</a></li>
<li>Type in username and password<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></li>
<li>Answer three security questions</li>
<li>Click "I Agree" button</li>
<li>Select the date from the dropdown menu</li>
<li>Select the "Report Type" radio button</li>
<li>Click the link to each symbol to download</li>
<li>Report the above step for each symbol</li>
</ul>
<p>You can imagine how tedious this is and very quickly she is bored. I was thinking whether this process could be automated. Then I started to search for a soluation and I found it. The library that can do this job is <code>PhantomJS</code>, a headless web browser scriptable with JavaScript. Over that long weekend four years ago, I learned <code>PhantomJS</code> and wrote my first web crawler to automatically download FINRA ATS data.</p>
<p>In this blog, I am going to walk through each technology I tried before and the advantages and disadvantages each method has, but I will not discuss each technology in depth. I will provide an real-life example of how to use each technoglogy to scrape data from a website in future blogs.</p>
<h2 id="phantomjs">PhantomJS<a class="headerlink" href="#phantomjs" title="Permanent link">&para;</a></h2>
<p><a href="http://phantomjs.org/">PhantomJS</a> is a headless web browser scriptable with JavaScript. It is very powerful and capable of handling dynamic web pages. This libray opened a brand new window for me and it got my journey to web scraping started.</p>
<h2 id="selenium-with-python">Selenium with Python<a class="headerlink" href="#selenium-with-python" title="Permanent link">&para;</a></h2>
<p><a href="https://www.seleniumhq.org/">Selenium</a> automates browsers. Initially, it is built for automating unit/regression testing in web applications. We can also use it for web crawling. <a href="https://selenium-python.readthedocs.io/">Selenium with Python</a> provides an easy-to-use API to use webdriver to interact with web component in a physical web browser. It basically launch your web browser and enable you do whatever you can do manually but in a programmatically way. Selenium with Python script can only run from a Windows machine since it needs to physically launch a browser.</p>
<h2 id="requests-in-python">Requests in Python<a class="headerlink" href="#requests-in-python" title="Permanent link">&para;</a></h2>
<p><a href="https://3.python-requests.org/">Requests</a> is an HTTP library for Python, built for Humans and Machines, alike. It is extremely easy and efficient to use if you want to get some static data from a website. Unfortunately if the data from a website is dynamically generated, it is not easy to use Requests to get them since it cannot interact with JavaScript.</p>
<h2 id="scrapy">Scrapy<a class="headerlink" href="#scrapy" title="Permanent link">&para;</a></h2>
<p><a href="https://scrapy.org/">Scrapy</a> is also a Python libray built specifically for web scraping. It is very powerful to extract static data you need from a website. It also has the same limitation as <a href="https://3.python-requests.org/">Requests</a> since it cannot interpret JavaScript.</p>
<h2 id="puppeteer">Puppeteer<a class="headerlink" href="#puppeteer" title="Permanent link">&para;</a></h2>
<p>From <a href="https://pptr.dev/">Puppeteer</a>'s official documentation site:</p>
<blockquote>
<p>Puppeteer is a Node library which provides a high-level API to control Chrome or Chromium over the 
DevTools Protocol. Puppeteer runs headless by default, but can be configured to run full 
(non-headless) Chrome or Chromium.</p>
</blockquote>
<p>The release of <a href="https://pptr.dev/">Puppeteer</a> by Google basically made <a href="http://phantomjs.org/">PhantomJS</a> unpopular and unnecessary since <a href="https://pptr.dev/">Puppeteer</a> can do everything that <a href="http://phantomjs.org/">PhantomJS</a> can do and offers a lot more features.</p>
<h2 id="curl">Curl<a class="headerlink" href="#curl" title="Permanent link">&para;</a></h2>
<p>The <code>curl</code> tool lets us fetch a given URL from the command-line and sometimes it is the easiest approach to retrieve a static files from a website. It is also very convenient to use <code>curl</code> to fetch data from an API. Later I will show how to use <code>curl</code> to download ATS data from FINRA website.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>In 2015, the FINRA ATS data is credentials protected and an annual fee is charged to access it. Later FINRA made it free and open to public. A while later, FINRA also made batch data downloading available. In January 2019, FINRA provides API to download its ATS data. Over the years, FINRA's data transparency program made trmendous efforts to make its data more accessible to users.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../array-concatenation/" title="Array Concatenation" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Array Concatenation
              </span>
            </div>
          </a>
        
        
          <a href="../../vscode/common/common/" title="Common" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Common
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 David Han
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/dpkwhan" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://www.linkedin.com/in/zhaohuihan/" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.267712eb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>